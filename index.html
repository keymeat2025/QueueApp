<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">
<title>QueueApp - Smart Queue Management</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<style>
/* ===== RESET & ROOT VARIABLES ===== */
*{margin:0;padding:0;box-sizing:border-box}
:root{
--primary:#f97316;
--primary-dark:#ea580c;
--secondary:#ec4899;
--success:#22c55e;
--warning:#eab308;
--danger:#dc2626;
--gray-50:#f9fafb;
--gray-100:#f3f4f6;
--gray-200:#e5e7eb;
--gray-600:#4b5563;
--gray-700:#374151;
--gray-900:#111827;
--white:#fff
}

/* ===== BASE MOBILE-FIRST STYLES ===== */
body{
font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
line-height:1.6;
color:var(--gray-900);
background:var(--gray-50);
font-size:16px;
-webkit-font-smoothing:antialiased;
-moz-osx-font-smoothing:grayscale;
overflow-x:hidden
}

h1{font-size:2rem;font-weight:700;line-height:1.2}
h2{font-size:1.5rem;font-weight:700;line-height:1.3}
h3{font-size:1.25rem;font-weight:600;line-height:1.4}
p{font-size:1rem;line-height:1.6}

/* ===== CONTAINER ===== */
.container{
width:100%;
max-width:1400px;
margin:0 auto;
padding:0 1rem
}

/* ===== NAVIGATION ===== */
nav{
background:var(--white);
box-shadow:0 2px 10px rgba(0,0,0,.1);
padding:1rem;
position:sticky;
top:0;
z-index:100
}

nav .nav-content{
display:flex;
justify-content:space-between;
align-items:center;
flex-wrap:wrap;
gap:0.75rem
}

nav h1{
color:var(--primary);
cursor:pointer;
font-size:1.5rem
}

nav .nav-buttons{
display:flex;
gap:0.5rem;
flex-wrap:wrap;
align-items:center
}

/* ===== BUTTONS ===== */
button,.btn{
padding:0.75rem 1.25rem;
min-height:48px;
border:none;
border-radius:0.75rem;
font-size:1rem;
font-weight:600;
cursor:pointer;
transition:all .3s ease;
text-decoration:none;
display:inline-block;
text-align:center;
line-height:1.5
}

button:hover,.btn:hover{
transform:translateY(-2px);
box-shadow:0 4px 12px rgba(0,0,0,.15)
}

button:active,.btn:active{
transform:translateY(0)
}

.btn-primary{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:var(--white)}
.btn-secondary{background:var(--gray-600);color:var(--white)}
.btn-success{background:var(--success);color:var(--white)}
.btn-danger{background:var(--danger);color:var(--white)}
.btn-warning{background:var(--warning);color:var(--white)}

/* ===== CARDS ===== */
.card{
background:var(--white);
border-radius:1rem;
padding:1.5rem;
box-shadow:0 2px 8px rgba(0,0,0,.08);
margin-bottom:1rem
}

/* ===== GRID SYSTEM ===== */
.grid{
display:grid;
gap:1rem;
margin-bottom:1rem
}

.grid-2{grid-template-columns:1fr}
.grid-3{grid-template-columns:1fr}
.grid-4{grid-template-columns:repeat(2,1fr)}

/* ===== FORM INPUTS ===== */
input,select,textarea{
width:100%;
padding:0.875rem;
min-height:48px;
border:2px solid var(--gray-200);
border-radius:0.75rem;
font-size:16px;
margin-bottom:1rem;
transition:border .3s ease
}

input:focus,select:focus,textarea:focus{
outline:none;
border-color:var(--primary)
}

/* ===== BADGES ===== */
.badge{
display:inline-block;
padding:0.35rem 0.75rem;
border-radius:999px;
font-size:0.875rem;
font-weight:700
}

.badge-primary{background:var(--primary);color:var(--white)}
.badge-warning{background:var(--warning);color:var(--white)}
.badge-danger{background:var(--danger);color:var(--white)}
.badge-secondary{background:var(--gray-600);color:var(--white)}

/* ===== BACKGROUNDS ===== */
.bg-gradient{background:linear-gradient(135deg,#fff7ed 0%,#fce7f3 100%)}
.bg-gradient-primary{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:var(--white)}

/* ===== DISPLAY SCREEN ===== */
.display-screen{
background:linear-gradient(135deg,#1f2937 0%,#111827 100%);
color:var(--white);
min-height:100vh;
padding:1.5rem;
overflow-y:auto
}

.display-screen h1{
font-size:2.5rem;
margin-bottom:1.5rem
}

.display-screen h2{
font-size:2rem
}

.display-screen .queue-number{
font-size:5rem;
font-weight:900;
line-height:1
}

/* ===== ALERTS ===== */
.alert{
padding:1rem;
border-radius:0.75rem;
margin-bottom:1rem;
border:2px solid
}

.alert-warning{background:#fef9c3;border-color:var(--warning);color:#854d0e}
.alert-danger{background:#fee2e2;border-color:var(--danger);color:#991b1b}
.alert-success{background:#dcfce7;border-color:var(--success);color:#166534}
.alert-info{background:#dbeafe;border-color:#2563eb;color:#1e40af}

/* ===== QR CODE DISPLAY ===== */
.display-qr-fixed{
position:fixed;
top:1rem;
right:1rem;
z-index:1000;
cursor:move;
transition:opacity .3s ease;
max-width:280px
}

.display-qr-fixed.dragging{
opacity:.8;
cursor:grabbing
}

.display-qr-fixed.hidden{
display:none
}

/* ===== QR CONTROLS ===== */
.qr-controls{
position:fixed;
top:1rem;
left:1rem;
background:rgba(0,0,0,.9);
color:white;
padding:1rem;
border-radius:1rem;
z-index:2000;
box-shadow:0 8px 32px rgba(0,0,0,.5);
min-width:220px
}

.qr-controls.minimized{
padding:.5rem;
min-width:auto
}

.qr-controls.minimized .qr-controls-content{
display:none
}

.qr-controls h3{
font-size:1rem;
margin-bottom:.75rem;
color:var(--primary)
}

.qr-control-btn{
background:var(--primary);
color:white;
border:none;
padding:.5rem 1rem;
border-radius:.5rem;
cursor:pointer;
font-size:.875rem;
font-weight:600;
margin:.25rem;
transition:all .2s ease;
display:inline-block
}

.qr-control-btn:hover{
background:var(--primary-dark);
transform:scale(1.05)
}

.qr-control-btn.active{
background:var(--success)
}

.qr-control-btn.small{
padding:.35rem .75rem;
font-size:.75rem
}

.qr-size-control{
margin:.75rem 0
}

.qr-size-control label{
display:block;
font-size:.875rem;
margin-bottom:.5rem;
color:rgba(255,255,255,.9)
}

.qr-size-slider{
width:100%;
margin:.5rem 0
}

.qr-toggle-btn{
background:rgba(249,115,22,.9);
color:white;
border:none;
padding:.75rem;
border-radius:50%;
cursor:pointer;
font-size:1.25rem;
width:50px;
height:50px;
display:flex;
align-items:center;
justify-content:center;
transition:all .3s ease
}

.qr-toggle-btn:hover{
background:rgba(249,115,22,1);
transform:scale(1.1)
}

.control-group{
margin-bottom:.75rem
}

.control-group:last-child{
margin-bottom:0
}

/* ===== MODAL ===== */
.modal-overlay{
position:fixed;
top:0;
left:0;
right:0;
bottom:0;
background:rgba(0,0,0,.8);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
padding:1rem;
animation:fadeIn .3s ease
}

.modal-content{
background:white;
border-radius:1rem;
padding:2rem;
max-width:600px;
width:100%;
max-height:90vh;
overflow-y:auto;
animation:slideIn .3s ease
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
@keyframes pulse-badge{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}

/* ===== UTILITY CLASSES ===== */
.text-center{text-align:center}
.flex{display:flex}
.flex-wrap{flex-wrap:wrap}
.items-center{align-items:center}
.justify-between{justify-content:space-between}
.justify-center{justify-content:center}
.gap-1{gap:0.75rem}
.w-full{width:100%}
.hidden{display:none}
.space-y>*+*{margin-top:1rem}
.mb{margin-bottom:1rem}
.mt{margin-top:1rem}

/* ===== LOADING SCREEN ===== */
.loading-screen{
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
background:linear-gradient(135deg,#fff7ed 0%,#fce7f3 100%)
}

.loading-icon{
font-size:4rem;
margin-bottom:1.5rem;
animation:pulse 2s ease-in-out infinite
}

/* ===== PROGRESS BAR ===== */
.progress-bar{
background:var(--gray-200);
height:30px;
border-radius:999px;
overflow:hidden;
position:relative
}

.progress-fill{
height:100%;
display:flex;
align-items:center;
justify-content:center;
color:white;
font-weight:700;
transition:width .3s ease
}

/* ===== QR CONTAINER ===== */
.qr-container{
background:white;
padding:2rem;
border-radius:1rem;
display:inline-block;
box-shadow:0 8px 24px rgba(0,0,0,.15)
}

/* ========================================
   PROGRESSIVE ENHANCEMENT FOR LARGER SCREENS
   ======================================== */

/* ===== SMALL TABLETS & LARGER (600px+) ===== */
@media (min-width:600px){
h1{font-size:2.5rem}
h2{font-size:2rem}
.container{padding:0 1.5rem}
.grid-3{grid-template-columns:repeat(2,1fr)}
.grid-4{grid-template-columns:repeat(2,1fr)}
button,.btn{font-size:1.125rem}
}

/* ===== TABLETS & SMALL LAPTOPS (768px+) ===== */
@media (min-width:768px){
h1{font-size:3rem}
h2{font-size:2.5rem}
nav h1{font-size:1.75rem}
.grid-2{grid-template-columns:repeat(2,1fr)}
.grid-3{grid-template-columns:repeat(2,1fr)}
.grid-4{grid-template-columns:repeat(3,1fr)}
.display-screen{padding:2rem}
.display-screen h1{font-size:3.5rem}
.display-screen h2{font-size:2.5rem}
.display-screen .queue-number{font-size:8rem}
.card{padding:2rem}
}

/* ===== DESKTOPS (1024px+) ===== */
@media (min-width:1024px){
.container{padding:0 2rem}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(4,1fr)}
.display-screen{padding:3rem}
.display-screen h1{font-size:4rem}
.display-screen .queue-number{font-size:10rem}
}

/* ===== LARGE DESKTOPS & TVs (1440px+) ===== */
@media (min-width:1440px){
body{font-size:18px}
h1{font-size:4rem}
h2{font-size:3rem}
.display-screen h1{font-size:5rem}
.display-screen h2{font-size:3.5rem}
.display-screen .queue-number{font-size:12rem}
button,.btn{min-height:54px;font-size:1.25rem}
.display-qr-fixed{max-width:320px}
}

/* ===== ULTRA-WIDE & 4K (1920px+) ===== */
@media (min-width:1920px){
body{font-size:20px}
.container{max-width:1800px}
.display-screen{padding:4rem}
.display-screen .queue-number{font-size:15rem}
button,.btn{min-height:60px;padding:1rem 2rem}
.display-qr-fixed{max-width:380px}
}

/* ===== 4K & 8K DISPLAYS (2560px+) ===== */
@media (min-width:2560px){
body{font-size:24px}
.container{max-width:2000px}
h1{font-size:6rem}
h2{font-size:4.5rem}
.display-screen h1{font-size:6rem}
.display-screen .queue-number{font-size:20rem}
.card{padding:3rem}
button,.btn{min-height:70px;font-size:1.5rem}
.display-qr-fixed{max-width:450px}
}

/* ===== MOBILE-SPECIFIC OVERRIDES ===== */
@media (max-width:599px){
nav .nav-buttons{width:100%;justify-content:center}
.display-qr-fixed{
bottom:1rem!important;
right:1rem!important;
left:1rem!important;
top:auto!important;
max-width:calc(100% - 2rem)!important
}
.display-qr-fixed .qr-card{padding:1rem!important}
.display-qr-fixed #display-qr{width:150px!important;height:150px!important;margin:0 auto}
.display-screen .container{padding-bottom:200px}
}

/* ===== PRINT STYLES ===== */
@media print{
body *{visibility:hidden}
.print-qr,.print-qr *{visibility:visible}
.print-qr{position:absolute;left:0;top:0;width:100%}
}

/* ===== ACCESSIBILITY ===== */
@media (prefers-reduced-motion:reduce){
*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}
}
</style>
</head>
<body>
<div id="app"><div class="loading-screen"><div class="loading-icon">‚è≥</div><h1>Loading QueueApp...</h1></div></div>
<script>
const firebaseConfig={apiKey:"AIzaSyBQRfA1_qgG9x4w4aiDqAzAPghMEc5zE6Q",authDomain:"queueapp-97728.firebaseapp.com",projectId:"queueapp-97728",storageBucket:"queueapp-97728.firebasestorage.app",messagingSenderId:"41156558140",appId:"1:41156558140:web:f3277e7018176d0870f239",measurementId:"G-QSP7ZXNSFT"};
firebase.initializeApp(firebaseConfig);const auth=firebase.auth(),db=firebase.firestore();

const getTodayQRCode=rid=>`${window.location.origin}${window.location.pathname}#/r/${rid}/join`;
const generateQRCode=(eid,rid)=>{const el=document.getElementById(eid);if(!el)return;el.innerHTML='';const sw=window.innerWidth;let sz=sw<768?150:sw<1280?180:sw<1920?220:sw<2560?256:300;new QRCode(el,{text:getTodayQRCode(rid),width:sz,height:sz,colorDark:"#000",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.H})};

const FirebaseAdmin={async signIn(e,p){try{const u=await auth.signInWithEmailAndPassword(e,p);return{success:true,user:u.user}}catch(err){return{success:false,error:err.message}}},async signOut(){try{await auth.signOut();return{success:true}}catch(err){return{success:false,error:err.message}}},getCurrentUser(){return auth.currentUser},onAuthStateChanged(cb){return auth.onAuthStateChanged(cb)}};
window.FirebaseAdmin=FirebaseAdmin;
